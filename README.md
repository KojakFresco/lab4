# Лабораторная работа 4 — «Казино с гусями»

Цель: реализовать мини-симулятор казино с пользовательскими коллекциями и предметной моделью "игроки — гуси — фишки". README описывает требования и даёт пример поведения симуляции.

## Требования (кратко)
- Реализовать минимум две пользовательские коллекции:
  - одна списковая (через композицию) — поддерживает индексацию, срезы, итерацию, добавление/удаление;
  - одна словарная — должна содержать логику предметной области (например, балансы игроков).
- Коллекции должны реализовать:
  - __iter__ — итерация,
  - __len__ — длина,
  - __getitem__ — доступ по индексу / ключу,
  - для списковой — поддержка срезов,
  - методы добавления и удаления элементов.
- В проекте должны быть:
  - один базовый класс,
  - два класса-наследника, расширяющих или переопределяющих поведение.
- Реализовать один магический метод, отражающий предметную область:
  - выбор из: __add__, __call__, __repr__, __contains__ — с осмысленной реализацией (например, объединение гусей через __add__, добавление фишек через __add__ у Chip и т.п.).
- Реализовать функцию симуляции:
  ```python
  def run_simulation(steps: int = 20, seed: int | None = None) -> None:
      ...
  ```
  - Выполняет симуляцию за заданное количество шагов.
  - Использует `random`; при переданном `seed` последовательность событий детерминирована.
  - На каждом шаге выполняется одно случайное событие из списка.
  - Все события выводятся в консоль в виде текстового лога.

## Предметная модель (рекомендация)
- Player — игрок, поле `balance` (баланс), методы для ставок/получения выплат.
- Goose — базовый гусь (поля: `name`, `honk_volume`).
  - WarGoose — атакует игроков (влияет на баланс).
  - HonkGoose — имеет особый навык «крик», который вызывается и даёт эффект.
- Chip — фишки казино; имеет осмысленный магический метод `__add__` (например, складывает значения).
  
## Коллекции
- CasinoBalance (словарная) — отображение `player_name -> balance`. Обязательно логировать изменения (переопределить `__setitem__`).
- PlayerCollection / GooseCollection / ChipCollection (списковые) — поддерживают индексацию, срезы, итерацию, добавление и удаление.

## Класс Casino (минимум)
- Хранит:
  - коллекцию игроков,
  - коллекцию гусей,
  - коллекцию балансов,
  - (опционально) доходы гусей.
- Основные методы:
  - регистрация игрока/гуся,
  - выполнение одного шага симуляции,
  - обработка действий: ставка, выигрыш/проигрыш, атака WarGoose, крик HonkGoose, кража денег гусём, объединение гусей (__add__), паника игрока (проигрыш всего баланса) и т.п.

## Примеры случайных событий (минимум 5 различных)
- Игрок делает ставку — выигрывает часть (баланс увеличивается).
- Игрок проигрывает ставку (баланс уменьшается).
- WarGoose атакует игрока — отнимает деньги.
- HonkGoose "кричит" — вызывает эффект на баланс (например, бонус/штраф).
- Гусь пытается украсть деньги — успешно или нет.
- Два гуся объединяются через `__add__` (формируется стая).
- Игрок в панике теряет весь баланс.

## Формат логов
- Простые текстовые записи, например:
  - [STEP 5] Player Alice bets 10 → wins 20 (balance: 120)
  - [STEP 6] WarGoose Gosha attacks Bob: -30 (Bob balance: 5)
  - [STEP 7] HonkGoose Klax honks: all players +5

Лог должен быть понятным и воспроизводимым при фиксированном seed.

## Рекомендации по реализации
- Используйте композицию для списковых коллекций (внутри храните список).
- Для словарной коллекции — наследуйте от `MutableMapping` или реализуйте нужные методы вручную.
- Покройте основные сценарии тестами или простым скриптом запуска `run_simulation`.
- Сделайте код модульным: отдельные файлы для моделей (player, goose, chip), коллекций и казино.

---

Удачи! Следующий шаг — реализовать модули и тестовую симуляцию по этой спецификации.
