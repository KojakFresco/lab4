# Лабораторная №4. Симуляция Казино и Гусей

## Описание
Данный проект представляет собой симуляцию казино, где участвуют игроки, гуси и денежные потоки. Симуляция включает в себя случайные события, такие как ставки игроков, действия гусей и вращение колеса казино. Все события логируются в консоль с использованием цветного форматирования для удобства восприятия.

## Основные возможности

### 1. Игроки
- **Обычные игроки (Player)**: имеют имя и баланс, могут делать ставки.
- **Психопаты (PsychoPlayer)**: наследуют от Player, имеют уровень психоза, который изменяется в зависимости от выигрышей/проигрышей. При высоком уровне психоза могут убивать других игроков или совершать самоубийство.
- Игроки добавляются в казино с начальным балансом, который определяется случайным образом с учётом вероятностей (50, 100, 150, 200, 300, 500 с соответствующими весами).

### 2. Гуси
- Гуси представлены двумя типами:
  - **HonkGoose**: издаёт громкий крик (громкость от 1 до 10), который пугает игроков, заставляя их терять деньги (в зависимости от громкости) и увеличивая психоз PsychoPlayer.
  - **RichGoose**: раздаёт деньги игрокам (случайная сумма от 1 до 100).
- Гуси добавляются в казино с равномерным распределением между типами, учитывая текущий баланс типов.

### 3. Фишки казино
- **Chip**: представляет фишку с цветом и значением. Поддерживает сложение (Chip + Chip возвращает новую фишку с суммой значений).
- **ChipCollection**: коллекция фишек, поддерживает индексацию, срезы, итерацию, добавление и удаление.
- Не используются в казины, но реализованы для демонстрации работы с коллекциями.
### 4. Ставки
- Игроки могут делать ставки на:
  - Красное (вероятность ~47%)
  - Чёрное (вероятность ~48%)
  - Зеро (вероятность ~5%)
- Ставки логируются, и их результаты отображаются в консоли с цветами (зелёный для выигрыша, красный для проигрыша).

### 5. Коллекции
- Пользовательские коллекции для игроков, гусей, фишек и ставок:
  - **PlayerCollection**: поддерживает индексацию по индексу или имени, срезы и итерацию.
  - **GooseCollection**: аналогично поддерживает индексацию, срезы и итерацию.
  - **ChipCollection**: поддерживает индексацию, срезы, итерацию, добавление и удаление.
  - **CasinoBets**: словарная коллекция для хранения ставок игроков (имя -> {'type': тип_ставки, 'amount': сумма}).

### 6. События
На каждом шаге симуляции происходит одно случайное событие:
- Игрок делает ставку.
- Вращение колеса казино.
- Гусь крадёт деньги у игрока.
- Гусь выполняет своё уникальное действие (крик или раздача денег).
- Добавление нового игрока или гуся в казино.
- Психопат (PsychoPlayer) может убить другого игрока или совершить самоубийство, если уровень психоза высок.

### 7. Умный расчёт весов вероятностей
- В симуляции используется динамическая система расчёта весов для случайных событий.
- Вероятности событий адаптируются в зависимости от текущего состояния казино:
  - Если игроков слишком много, увеличивается вероятность добавления гуся.
  - Если ставок мало, увеличивается вероятность того, что игрок сделает ставку.
  - Если баланс игроков высокий, гуси чаще крадут деньги.
- Это позволяет симуляции быть более реалистичной и сбалансированной.

### 8. Логирование
- Все события симуляции логируются в консоль с использованием цветного форматирования (colorama) и эмодзи.
- Логи записываются в файл `sim.log` для последующего анализа.
- Уровни логирования: INFO для основных событий, DEBUG для отладки.

## Структура проекта
- `src/` - исходный код проекта.
  - `casino.py` - основной класс казино и логика симуляции.
  - `player.py` - классы Player, PsychoPlayer и PlayerCollection.
  - `goose.py` - классы Goose, HonkGoose, RichGoose и GooseCollection.
  - `chip.py` - класс Chip и ChipCollection.
  - `constants.py` - константы проекта (максимальное количество сущностей).
  - `config.py` - конфигурация логирования.
  - `main.py` - точка входа с CLI через typer.
  - `simulation.py` - функция запуска симуляции.
- `tests/` - тесты для проверки функциональности (покрытие ~85%).
- `sim.log` - файл логов симуляции.
- `pyproject.toml` - конфигурация проекта.
- `uv.lock` - файл блокировки зависимостей.
